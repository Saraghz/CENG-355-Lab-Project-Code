# CENG-355-Lab-Project-Code
This is the code I made and used for my CENG 355 lab project. 

The main.c containts the code I worked on and created. All the other code and headers and files where given to us as part of the lab.
main.c is in /src/main.c


//------------------------------------------------------------------------//


The Object of this lab project is given below and was taken from the lab manual. 

You are to develop an embedded system for monitoring and controlling a pulse-widthmodulated
(PWM) signal that will be generated by an external timer (NE555 IC). An
external optocoupler (4N35 IC), driven by the microcontroller on the STMF0 Discovery
board, will be used to control the frequency of the PWM signal. The microcontroller will
be used to measure the voltage across a potentiometer (POT) on the PBMCUSLK board
and relay it to the external optocoupler for controlling the PWM signal frequency. The
microcontroller will also be used to measure the frequency of the generated PWM signal.
The measured frequency and the corresponding POT resistance are to be displayed on the
LCD on the PBMCUSLK board. 


//------------------------------------------------------------------------//


Now the Specifcations of the lab.

Specifications
  In Part 2 of the introductory lab, you have used the function generator to generate a
square-wave signal and to display its period and frequency on the console. For this
project, you will use the NE555 timer (instead of the function generator) to generate
the square-wave signal, and you will use the LCD (instead of the console) to display
the signal frequency and the POT resistance. You should be able to measure the signal
frequency reusing most of the code you have developed in Part 2.

  The STM32F051R8T6 MCU mounted on the STM32F0 Discovery board features
built-in analog-to-digital converter (ADC), digital-to-analog converter (DAC), and
serial peripheral interface (SPI). The DAC will be used to drive the 4N35 optocoupler
to adjust the signal frequency of the NE555 timer, based on the potentiometer voltage
read by the ADC, and the SPI will be used to communicate with the LCD.
  
  The analog voltage signal coming from the potentiometer on the PBMCUSLK board
will be measured continuously by the ADC â€“ this task is to be accomplished using a
polling approach. Using those voltage measurements, you will need to calculate the
corresponding potentiometer resistance value. You must also determine the lower and
the upper limits of the measurable voltage.

  You will use the digital value obtained from the ADC to adjust the frequency of the
PWM signal generated by the NE555 timer. For that purpose, you will use the DAC
to convert that digital value to an analog voltage signal driving the 4N35 optocoupler.

  To display the signal frequency and the potentiometer resistance, you will use the SPI
(to be appropriately configured) to drive the LCD on the PBMCUSLK board.
  
  The LCD is a 4-bit, 2-by-8 character display, and there is no direct write access the
LCD pins. The only way to control the LCD pins is through the 8-bit 74HC595 shift
register on the PBMCUSLK board. The 74HC595 shift register will need to receive
8-bit words from the SPI via the serial MOSI port, appropriately timed using the latch
clock LCK and the serial shift register clock SCK. Each 8-bit word sent by the SPI
will need to include LCD data bits D3-D0, register-select bit RS, and enable bit EN.

  As an option (during your software development), you may use the CMSIS-defined
software library functions for SPI access. For any other peripherals involved in this
project, your code must access relevant registers explicitly (for educational purposes). 
